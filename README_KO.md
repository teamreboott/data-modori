[English](README.md) | í•œêµ­ì–´

# Data-Modori: ë°ì´í„° ì„¸ê³„ì˜ ìƒˆë¡œìš´ ì§€í‰ì„ ì—´ë‹¤

<div align="center">
  <img src="https://github.com/teamreboott/data-juicer/assets/40276516/86ec78ca-fb84-4367-a7d5-b67220114e39" width="300"/>
  <div>&nbsp;</div>
  <div align="center">
    <b><font size="5">TEAMREBOOTT website </font></b>
    <sup>
      <a href="https://reboott.ai">
        <i><font size="4">HOT</font></i>
      </a>
    </sup>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <b><font size="5">TeamAR platform</font></b>
    <sup>
      <a href="https://askyour.trade">
        <i><font size="4">TRY IT OUT</font></i>
      </a>
    </sup>
  </div>
  <div>&nbsp;</div>


![](https://img.shields.io/badge/license-Apache--2.0-ff655b.svg)
![](https://img.shields.io/badge/language-Python-b44dff.svg)
[![Contributing](https://img.shields.io/badge/Contribution-welcome-5bc4ff.svg)](docs/DeveloperGuide.md)

<!-- [![pypi version](https://img.shields.io/pypi/v/py-data-juicer?logo=pypi&color=ffb84d)](https://pypi.org/project/py-data-juicer)
[![Docker version](https://img.shields.io/docker/v/datajuicer/data-juicer?logo=docker&label=Docker&color=0100FF)](https://hub.docker.com/r/datajuicer/data-juicer)
[![Document_List](https://img.shields.io/badge/Docs-English-FAED7D?logo=Markdown)](README.md#documentation) -->

[ğŸ“˜ë¬¸ì„œ]() |
[ğŸ› ï¸ì„¤ì¹˜]() |
[ğŸ¤”ë¬¸ì œ]()

</div>

Data-ModoriëŠ” ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ì´ìš©í•´ ë‹¤ì–‘í•œ ê°€ëŠ¥ì„±ì„ ì œê³µí•˜ëŠ” ì°½ì˜ì ì´ê³  ì§„ë³´ì ì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë°ì´í„°ì˜ ëª¨ë“  ì¡°ê°ë“¤ì„ í•˜ë‚˜ë¡œ ì¡°ë¦½í•˜ì—¬ ì›í•˜ëŠ” ì •ë³´ì˜ ì„¸ê³„ë¡œ ì—¬ëŸ¬ë¶„ì„ ì´ˆëŒ€í•©ë‹ˆë‹¤.

- ë°ì´í„° í†µí•©: ë‹¤ì–‘í•œ ì†ŒìŠ¤ë¡œë¶€í„° ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ í•˜ë‚˜ì˜ ì¤‘ì•™ í—ˆë¸Œë¡œ í†µí•©í•˜ì—¬ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ìœ ì—°í•œ ë¶„ì„: ê³ ê¸‰ ë¶„ì„ ë„êµ¬ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì‹¬ì¸µì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ìƒˆë¡œìš´ ì¸ì‚¬ì´íŠ¸ì™€ ê´€ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë§ì¶¤í˜• ê²°ê³¼: ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ ë°ì´í„°ë¥¼ êµ¬ì„±í•˜ê³  í‘œì‹œí•˜ì—¬ ë§ì¶¤í˜• ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤: ì§ê´€ì ì´ê³  ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” ê³ ê¸‰ ì§€ì‹ ì—†ì´ë„ ë°ì´í„°ì˜ í˜ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

----

## Table of Contents

- [ì„¤ì¹˜](#installation)
- [ë°ì´í„° ì „ì²˜ë¦¬](#data-processing)
- [ë°ì´í„° ë¶„ì„](#data-analysis)
- [ë°ì´í„° ì‹œê°í™”](#data-visualization)
- [Config íŒŒì¼ êµ¬ì¶•](#build-up-config-files)

### ì„¤ì¹˜

- **Github**ì—ì„œ ì†ŒìŠ¤ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
```bash
git clone https://github.com/teamreboott/data-juicer
cd data-juicer
```

- ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ ìµœì‹  Data-Modori ë²„ì „ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤:
```bash
pip install -v -e .
```

- ì¼ë¶€ OPëŠ” ë„ˆë¬´ í¬ê±°ë‚˜ í”Œë«í¼ í˜¸í™˜ì„±ì´ ë‚®ì€ íƒ€ì‚¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì˜ì¡´í•©ë‹ˆë‹¤. í•„ìš”ì— ë”°ë¼ ì„ íƒì  ì¢…ì†ì„±ì„ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
pip install -v -e .  # install a minimal dependencies, which support the basic functions
pip install -v -e .[tools] # install a subset of tools dependencies
```

- The dependency options are listed below:

| Tag          | Description                                                           |
|--------------|-----------------------------------------------------------------------|
| `.` or `.[mini]` | ê¸°ë³¸ Data-Modorië¥¼ ìœ„í•œ ìµœì†Œí•œì˜ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.                                   |
| `.[all]`       | ëª¨ë“  ì„ íƒì  ì¢…ì†ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤ (ìµœì†Œí•œì˜ ì¢…ì†ì„± ë° ì•„ë˜ì˜ ëª¨ë“  ì¢…ì†ì„±).                            |
| `.[sci]`       | ëª¨ë“  OPsì— ëŒ€í•œ ëª¨ë“  ì¢…ì†ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.                                             |
| `.[dist]`      | ë¶„ì‚° ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. (ì‹¤í—˜ì ì¸ ê¸°ëŠ¥)                                   |
| `.[dev]`       | íŒ¨í‚¤ì§€ë¥¼ ê°œë°œìë¡œì„œ ê°œë°œí•˜ëŠ” ë° í•„ìš”í•œ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.                                     |
| `.[tools]`     | í’ˆì§ˆ ë¶„ë¥˜ê¸°ì™€ ê°™ì€ íŠ¹ìˆ˜ ë„êµ¬ë¥¼ ìœ„í•œ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. |

### ë°ì´í„° ì „ì²˜ë¦¬

- `process_data.py` ë„êµ¬ì™€ config íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ì…‹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```bash
python tools/process_data.py --config configs/process.yaml
```

- **ì°¸ê³ :** ë¡œì»¬ì— ì €ì¥ë˜ì§€ ì•Šì€ third-party models ë˜ëŠ” ë¦¬ì†ŒìŠ¤ê°€ í•„ìš”í•œ ì¼ë¶€ ì—°ì‚°ìì˜ ê²½ìš°, ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ìš´í•˜ê¸° ìœ„í•´ ì²˜ìŒ ì‹¤í–‰í•  ë•Œ ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê¸°ë³¸ ë‹¤ìš´ë¡œë“œ ìºì‹œ ë””ë ‰í„°ë¦¬ëŠ” ~/.cache/data_juicerì— ìœ„ì¹˜í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ë””ë ‰í† ë¦¬ë¡œ ìºì‹œ ìœ„ì¹˜ë¥¼ ë³€ê²½í•˜ë ¤ë©´ ì…¸ í™˜ê²½ ë³€ìˆ˜ DATA_JUICER_CACHE_HOMEì„ ë‹¤ë¥¸ ë””ë ‰í„°ë¦¬ë¡œ ì„¤ì •í•˜ê³ 
DATA_JUICER_MODELS_CACHE ë˜ëŠ” DATA_JUICER_ASSETS_CACHEë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **Note:** For some operators that involve third-party models or resources which are not stored locally on your computer, it might be slow for the first running because these ops need to download corresponding resources into a directory first.
The default download cache directory is `~/.cache/data_juicer`. Change the cache location by setting the shell environment variable, `DATA_JUICER_CACHE_HOME` to another directory, and you can also change `DATA_JUICER_MODELS_CACHE` or `DATA_JUICER_ASSETS_CACHE` in the same way:

```bash
# cache home
export DATA_JUICER_CACHE_HOME="/path/to/another/directory"
# cache models
export DATA_JUICER_MODELS_CACHE="/path/to/another/directory/models"
# cache assets
export DATA_JUICER_ASSETS_CACHE="/path/to/another/directory/assets"
```

### ë°ì´í„° ë¶„ì„

- `analyze_data.py` ë„êµ¬ì™€ config íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ì…‹ì„ ë¶„ì„í•©ë‹ˆë‹¤.

```bash
python tools/analyze_data.py --config configs/analyser.yaml
```

- **ì°¸ê³ :** ë¶„ì„ê¸°ëŠ” Filter opsì˜ í†µê³„ë§Œ ê³„ì‚°í•©ë‹ˆë‹¤. ë”°ë¼ì„œ Mapper or Deduplicator opsëŠ” ë¶„ì„ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë¬´ì‹œë©ë‹ˆë‹¤.

### ë°ì´í„° ì‹œê°í™”

- `app.py` ë¥¼ ì‹¤í–‰í•˜ì—¬ ë¸Œë¼ìš°ì €ì—ì„œ ë°ì´í„°ì…‹ì„ ì‹œê°í™”í•©ë‹ˆë‹¤.

```bash
streamlit run app.py
```

### Config íŒŒì¼ êµ¬ì¶•

- Config íŒŒì¼ì€ ì „ì—­ ì¸ìˆ˜ì™€ ë°ì´í„° í”„ë¡œì„¸ìŠ¤ë¥¼ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì—°ì‚°ì ëª©ë¡ì„ ì§€ì •í•©ë‹ˆë‹¤.
  - ì „ì—­ ì¸ìˆ˜: ì…ë ¥/ì¶œë ¥ ë°ì´í„°ì…‹ ê²½ë¡œ, ì›Œì»¤ ìˆ˜ ë“±ì„ ì„¤ì •í•©ë‹ˆë‹¤.
  - ì—°ì‚°ì ëª©ë¡: ë°ì´í„°ì…‹ì„ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì—°ì‚°ìì™€ í•´ë‹¹ ì¸ìˆ˜ë¥¼ ë‚˜ì—´í•©ë‹ˆë‹¤.
- ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¡œ ìì²´ êµ¬ì„± íŒŒì¼ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - â–: config_all.yaml ì˜ˆì œ êµ¬ì„± íŒŒì¼ì—ì„œ ìˆ˜ì • (ì‚¬ìš©í•˜ì§€ ì•Šì„ ì—°ì‚°ìë¥¼ ì œê±°í•˜ê³  ì¸ìˆ˜ë¥¼ ì •ë¦¬í•˜ì„¸ìš”).
  - â•: ì²˜ìŒë¶€í„° ìì²´ êµ¬ì„± íŒŒì¼ ì‘ì„±. ì˜ˆì œ êµ¬ì„± íŒŒì¼ [`config_all.yaml`](configs/config_all.yaml), [op documents](docs/Operators.md) ë° [Build-Up Guide for developers](docs/DeveloperGuide.md#build-your-own-configs)ì„ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - yaml íŒŒì¼ ì™¸ì—ë„ ëª…ë ¹ ì¤„ì—ì„œ íŒŒë¼ë¯¸í„° í•˜ë‚˜ë§Œ ì§€ì •í•˜ì—¬ yaml íŒŒì¼ì˜ ê°’ì„ ë¬´ì‹œí•˜ê³  ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
python xxx.py --config configs/process.yaml --language_id_score_filter.lang=ko 
```
    
```bash
# Process config example for dataset

# global parameters
project_name: 'demo-process'
dataset_path: './data/test.json'  # path to your dataset directory or file
export_path: './output/test.jsonl'

np: 4  # number of subprocess to process your dataset
text_keys: 'content'

# process schedule
# a list of several process operators with their arguments
process:
  - language_id_score_filter:
      lang: 'en'
```

## License
Data-Modori is released under Apache License 2.0.

## Contributing
We are in a rapidly developing field and greatly welcome contributions of new 
features, bug fixes and better documentations. Please refer to[How-to Guide for Developers](docs/DeveloperGuide.md).

## Acknowledgement
Data-Modori is used across various LLM products and research initiatives,
including industrial LLMs from Teamreboott AI TEAM(AR), 
such as AUT for trade and AUW for work. 

We look forward to more of your experience, suggestions and discussions for collaboration!

Data-Modori thanks and refers to several community projects, such as 
[data-juicer](https://github.com/alibaba/data-juicer), [Huggingface-Datasets](https://github.com/huggingface/datasets), [Bloom](https://huggingface.co/bigscience/bloom), [RedPajama](https://github.com/togethercomputer/RedPajama-Data), [Pile](https://huggingface.co/datasets/EleutherAI/pile), [Alpaca-Cot](https://huggingface.co/datasets/QingyiSi/Alpaca-CoT), [Megatron-LM](https://github.com/NVIDIA/Megatron-LM), [DeepSpeed](https://www.deepspeed.ai/), [Arrow](https://github.com/apache/arrow), [Ray](https://github.com/ray-project/ray), [Beam](https://github.com/apache/beam),  [LM-Harness](https://github.com/EleutherAI/lm-evaluation-harness), [HELM](https://github.com/stanford-crfm/helm), ....

## References
If you find our work useful for your research or development, please kindly cite the following [paper](https://arxiv.org/abs/2309.02033).
```
@misc{chen2023datajuicer,
title={Data-Juicer: A One-Stop Data Processing System for Large Language Models},
author={Daoyuan Chen and Yilun Huang and Zhijian Ma and Hesen Chen and Xuchen Pan and Ce Ge and Dawei Gao and Yuexiang Xie and Zhaoyang Liu and Jinyang Gao and Yaliang Li and Bolin Ding and Jingren Zhou},
year={2023},
eprint={2309.02033},
archivePrefix={arXiv},
primaryClass={cs.LG}
}
```